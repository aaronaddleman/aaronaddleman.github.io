<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Philomathy &#8211; Aaron Addleman</title>
<meta name="description" content="The blog by Aaron Addleman">
<meta name="keywords" content="">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="/images/9553056715_0a418a1852_o.jpg">

<meta name="twitter:title" content="Philomathy">
<meta name="twitter:description" content="The blog by Aaron Addleman">
<meta name="twitter:creator" content="@aaronaddleman">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Philomathy">
<meta property="og:description" content="The blog by Aaron Addleman">
<meta property="og:url" content="/page5/index.html">
<meta property="og:site_name" content="Aaron Addleman">





<link rel="canonical" href="/page5/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Aaron Addleman Feed">
<link rel="author" href="aaronaddleman?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/css/uv/eiffel.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/avatar.jpg" alt="Aaron Addleman photo" class="author-photo">
					<h4>Aaron Addleman</h4>
					<p>Nerd and geek with passion for learning and exploring.</p>
				</li>
				<li><a href="/about/">Learn More</a></li>
				<li>
					<a href="mailto:aaronaddleman@gmail.com"><i class="fa fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/aaronaddleman"><i class="fa fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="http://facebook.com/aaronaddleman"><i class="fa fa-facebook"></i> Facebook</a>
				</li>
				<li>
					<a href="aaronaddleman"><i class="fa fa-google-plus"></i> Google+</a>
				</li>
				<li>
					<a href="http://linkedin.com/pub/aaron-addleman/0/428/276"><i class="fa fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://github.com/aaronaddleman"><i class="fa fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">All Posts</a></li>
				<li><a href="/tags/">All Tags</a></li>
			</ul>
		</li>
		<li><a href="/resume">Resume</a></li>
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  <div class="image-credit">Image source: <a href="">Aaron Addleman</a></div><!-- /.image-credit -->
  
    <div class="entry-image">
      <img src="/images/9553056715_0a418a1852_o.jpg" alt="Philomathy">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Aaron Addleman</h1>
      <h2>Philomathy</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2012-10-13T00:00:00-07:00"><a href="/articles/limiting-commenting-to-articles/">October 13, 2012</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Aaron Addleman">Aaron Addleman</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="/articles/limiting-commenting-to-articles/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/articles/limiting-commenting-to-articles/" rel="bookmark" title="Limiting comments to pages by using a regex" itemprop="url">Limiting comments to pages by using a regex</a></h1>
    
  </header>
  <div class="entry-content">
    <h1 id="limiting-comments-to-pages-by-using-a-regex">Limiting comments to pages by using a regex</h1>

<p>After I added the changes for enabling comments on my Nesta based website, I noticed they showed up everywhere and I decided to try and change this behavior. By adding the following code in my template called “comments.haml” I was able to target only the article pages:</p>

<pre><code>:::ruby
- if short_name = Nesta::Config.disqus_short_name
  - if @page.path =~ /^articles\/.*/
    #disqus_thread
      - if Sinatra::Application.environment == :development
        :javascript
          var disqus_developer = true;
      %script{:type =&gt; 'text/javascript', :src =&gt; "http://#{short_name}.disqus.com/embed.js", :async =&gt; true}

      %noscript
        %a(href="http://#{short_name}.disqus.com/embed.js?url=ref") View comments.
</code></pre>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2012-10-13T00:00:00-07:00"><a href="/articles/convert-invalid-strings-into-entities/">October 13, 2012</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Aaron Addleman">Aaron Addleman</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="/articles/convert-invalid-strings-into-entities/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/articles/convert-invalid-strings-into-entities/" rel="bookmark" title="Convert invalid strings into entities" itemprop="url">Convert invalid strings into entities</a></h1>
    
  </header>
  <div class="entry-content">
    <h1 id="convert-invalid-strings-into-entities">Convert invalid strings into entities</h1>

<h1 id="summary">Summary</h1>

<p>While scraping content from a website, I ran into a large problem with content containing invalid characters. These were characters like the “medium-dash”, apostrophe from a Microsoft Word document, and other strange characters (excluding math operations). With my script grabbing the content and putting it into Wordpress, they were all converted into three characters that looked really bad.</p>

<h1 id="solution">Solution</h1>

<h2 id="attempt-1-outcome--okay-but-too-many-variations">Attempt 1 (outcome = okay, but too many variations)</h2>

<p>I tried to use gsub to replace the characters, but this started to get long and out of control and at some point, it stopped to work on the count of I could not target the invalid character.</p>

<h2 id="attempt-2-outcome--not-good">Attempt 2 (outcome = not good)</h2>

<p>Forcing the ruby script to work in UTF-8 only did not help either. This seemed to have no effect by adding the following to the top of my script files:</p>

<pre><code>:::ruby
#!/usr/bin/env ruby -w
# encoding: UTF-8
</code></pre>

<h2 id="attempt-3-outcome--better">Attempt 3 (outcome = better)</h2>

<p>Using ruby string#encode to convert the invalids did work, but it converted some items and others were just deleted. Below is an example of how I used the code:</p>

<pre><code>:::ruby
string.encode Encoding.find('ASCII'), {
  :invalid           =&gt; :replace,  # Replace invalid byte sequences
  :undef             =&gt; :replace,  # Replace anything not defined in ASCII
  :replace           =&gt; '',        # Use a blank for those replacements
  :universal_newline =&gt; true       # Always break lines with \n
}
</code></pre>

<h2 id="attempt-4-outcome--very-good">Attempt 4 (outcome = very good)</h2>

<p>I came across the library called <a href="http://htmlentities.rubyforge.org/" title="Html Entities">htmlentities</a> and with a little testing I found a great combination of what I wanted to do with the scrapped content. First, the code takes the inner html and encodes the invalid characters. Then I use gsub to return some of the entities back into what I would like to use for Wordpress content to uphold the html classes, tags, and design.</p>

<pre><code>:::ruby
require 'htmlentities'

HTMLEntities::new::encode(results.inner_html, :basic, :named, :decimal).gsub("&amp;lt;", "&lt;").gsub("&amp;gt;", "&gt;").gsub("&amp;#10;", "").gsub("&amp;quot;", "\"")
</code></pre>

<p>I might try to use the results.inner_text but this works great for this project.</p>

<h2 id="attempt-5-outcome--better-than-attempt-4">Attempt 5 (outcome = better than attempt 4)</h2>

<p>I finally realized that in the case you have a document that contains entities and characters that should be in entity form, you need to decode the entities first, then encode all of the characters that need to be in entity form.  Not sure why ‘htmlentities’ does not do this automatically, but oh well. Below is an example of what I like to do in my code:</p>

<pre><code>:::ruby
require 'htmlentities'

decoded_value = HTMLEntities::new::decode(value)
HTMLEntities::new::encode(decoded_value, :basic, :named, :decimal).gsub(/\s\s+/, " ").gsub(/&amp;#10;/, "")
</code></pre>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2012-09-23T00:00:00-07:00"><a href="/articles/nesta-caching/">September 23, 2012</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Aaron Addleman">Aaron Addleman</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="/articles/nesta-caching/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/articles/nesta-caching/" rel="bookmark" title="How to enable caching in Nestacms 0.9.13" itemprop="url">How to enable caching in Nestacms 0.9.13</a></h1>
    
  </header>
  <div class="entry-content">
    <h2 id="summary">Summary</h2>

<p>I wanted to turn on caching but got a bad error message (along the lines of “calling to a private method ‘public’ is not allowed”) so I decided to try a test of renaming the method to one that is allowed. So after investigating around in the Nesta gem of files I made the following changes in the cache.rb file:</p>

<h2 id="change-1">change #1</h2>

<h3 id="old-block">old block</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">cache_page_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">opts</span><span class="o">=</span><span class="p">{})</span>
      <span class="c1"># test if given a full path rather than relative path, otherwise join the public path to cache_dir </span>
      <span class="c1"># and ensure it is a full path</span>
      <span class="n">cache_dir</span> <span class="o">=</span> <span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_dir</span> <span class="o">==</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_dir</span><span class="p">))</span> <span class="p">?</span> 
          <span class="n">settings</span><span class="o">.</span><span class="n">cache_dir</span> <span class="p">:</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">settings</span><span class="o">.</span><span class="n">public</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># &lt;--- old line</span>
      <span class="n">cache_dir</span> <span class="o">=</span> <span class="n">cache_dir</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">2</span><span class="o">]</span> <span class="k">if</span> <span class="n">cache_dir</span><span class="o">[-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;/&#39;</span>
      <span class="s2">&quot;</span><span class="si">#{</span><span class="n">cache_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">cache_file_name</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">opts</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">end</span></code></pre></div>

<h3 id="new-block">new block</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">cache_page_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">opts</span><span class="o">=</span><span class="p">{})</span>
      <span class="c1"># test if given a full path rather than relative path, otherwise join the public path to cache_dir </span>
      <span class="c1"># and ensure it is a full path</span>
      <span class="n">cache_dir</span> <span class="o">=</span> <span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_dir</span> <span class="o">==</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_dir</span><span class="p">))</span> <span class="p">?</span> 
          <span class="n">settings</span><span class="o">.</span><span class="n">cache_dir</span> <span class="p">:</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">settings</span><span class="o">.</span><span class="n">public_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># &lt;--- new line</span>
      <span class="n">cache_dir</span> <span class="o">=</span> <span class="n">cache_dir</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">2</span><span class="o">]</span> <span class="k">if</span> <span class="n">cache_dir</span><span class="o">[-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;/&#39;</span>
      <span class="s2">&quot;</span><span class="si">#{</span><span class="n">cache_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">cache_file_name</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">opts</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">end</span></code></pre></div>

<h2 id="change-2">change #2</h2>

<p>At the bottom of the cache.rb file, add the two new lines:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">registered</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
      <span class="n">app</span><span class="o">.</span><span class="n">helpers</span><span class="p">(</span><span class="no">Cache</span><span class="o">::</span><span class="no">Helpers</span><span class="p">)</span>
      <span class="n">app</span><span class="o">.</span><span class="n">set</span> <span class="ss">:cache_enabled</span><span class="p">,</span> <span class="kp">true</span>
      <span class="n">app</span><span class="o">.</span><span class="n">set</span> <span class="ss">:cache_page_extension</span><span class="p">,</span> <span class="s1">&#39;.html&#39;</span>
      <span class="n">app</span><span class="o">.</span><span class="n">set</span> <span class="ss">:public_dir</span><span class="p">,</span> <span class="s1">&#39;public&#39;</span>         <span class="c1"># &lt;--- new line #1</span>
      <span class="n">app</span><span class="o">.</span><span class="n">set</span> <span class="ss">:cache_dir</span><span class="p">,</span> <span class="s1">&#39;public/cache&#39;</span>    <span class="c1"># &lt;--- new line #2</span>
      <span class="n">app</span><span class="o">.</span><span class="n">set</span> <span class="ss">:cache_logging</span><span class="p">,</span> <span class="kp">true</span>
      <span class="n">app</span><span class="o">.</span><span class="n">set</span> <span class="ss">:cache_logging_level</span><span class="p">,</span> <span class="ss">:debug</span>
    <span class="k">end</span></code></pre></div>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2012-08-28T00:00:00-07:00"><a href="/articles/ruby-find-last-file-entry/">August 28, 2012</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Aaron Addleman">Aaron Addleman</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="/articles/ruby-find-last-file-entry/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/articles/ruby-find-last-file-entry/" rel="bookmark" title="Find latest file ending with a number with Ruby" itemprop="url">Find latest file ending with a number with Ruby</a></h1>
    
  </header>
  <div class="entry-content">
    <h1 id="find-latest-file-ending-with-a-number-with-ruby">Find latest file ending with a number with Ruby</h1>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Dir</span><span class="o">.</span><span class="n">entries</span><span class="p">(</span><span class="n">shared_path</span> <span class="o">+</span> <span class="s1">&#39;/database_dumps&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">sort_by</span> <span class="o">|</span><span class="n">s</span><span class="o">|</span>
      <span class="n">s</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="sr">/\d+/</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">s</span><span class="o">|</span> <span class="n">s</span><span class="o">.</span><span class="n">to_i</span><span class="p">}</span><span class="o">.</span><span class="n">last</span>
    <span class="k">end</span></code></pre></div>

<h1 id="broken-down-in-english">Broken down in english</h1>

<p>Using the Dir class to use the method “entries” to look in the path, drop the first two entries “.” and “..”, sort by the results of the scan of \d+ (digits converted to an integer “to_i”). After all that, return the last value which should be the highest number.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2012-08-20T00:00:00-07:00"><a href="/articles/backup_ee_environments/">August 20, 2012</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Aaron Addleman">Aaron Addleman</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="/articles/backup_ee_environments/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/articles/backup_ee_environments/" rel="bookmark" title="No frills shell script to backup multiple environments with a database dump" itemprop="url">No frills shell script to backup multiple environments with a database dump</a></h1>
    
  </header>
  <div class="entry-content">
    <h1 id="this-is-a-test">this is a test</h1>

<p>here is the script</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/usr/bin/env bash</span>
  <span class="c"># usage:</span>
  <span class="c"># </span>
  <span class="c"># ./backup_ee.sh (dev|prod|stage)</span>
  <span class="k">function</span> backup_site <span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">&quot;mkdir -p $backup_dir&quot;</span>
    <span class="nv">archive_name</span><span class="o">=</span><span class="sb">`</span>basename <span class="nv">$backup_file</span><span class="sb">`</span>
    <span class="nb">echo</span> <span class="s2">&quot;Archiving: $1 ($backup_file to $backup_dir/$archive_name)&quot;</span>
    <span class="nb">echo</span> <span class="s2">&quot;tar pzcvf $backup_dir/$archive_name.tar --totals $backup_file&quot;</span>
    <span class="nb">echo</span> <span class="s2">&quot;Compressing: $1 ($backup_file to $backup_dir/$archive_name)&quot;</span>
    <span class="nb">echo</span> <span class="s2">&quot;gzip $backup_dir/$archive_name.tar&quot;</span>
    <span class="nb">echo</span> <span class="s2">&quot;mysqldump -u $backup_db_user -p$backup_db_pass $backup_dv &gt; $backup_dir/$backup_db.sql&quot;</span>
  <span class="o">}</span>
  <span class="k">function</span> site <span class="o">()</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nv">$1</span> in
      dev <span class="o">)</span>
      <span class="c">#backup dev</span>
      <span class="nv">backup_file</span><span class="o">=</span><span class="s2">&quot;/var/www/dev&quot;</span>
      <span class="nv">backup_db</span><span class="o">=</span><span class="s2">&quot;db_name&quot;</span>
      <span class="nv">backup_db_user</span><span class="o">=</span><span class="s2">&quot;db_user&quot;</span>
      <span class="nv">backup_db_pass</span><span class="o">=</span><span class="s2">&quot;db_pass&quot;</span>
      backup_site
        <span class="p">;;</span>
      prod <span class="o">)</span>
      <span class="c">#backup prod</span>
      <span class="nv">backup_file</span><span class="o">=</span><span class="s2">&quot;/var/www/prod&quot;</span>
      <span class="nv">backup_db</span><span class="o">=</span><span class="s2">&quot;db_name&quot;</span>
      <span class="nv">backup_db_user</span><span class="o">=</span><span class="s2">&quot;db_user&quot;</span>
      <span class="nv">backup_db_pass</span><span class="o">=</span><span class="s2">&quot;db_pass&quot;</span>
      backup_site
        <span class="p">;;</span>
      stage <span class="o">)</span>
      <span class="c">#backup stage</span>
      <span class="nv">backup_file</span><span class="o">=</span><span class="s2">&quot;/var/www/stage&quot;</span>
      <span class="nv">backup_db</span><span class="o">=</span><span class="s2">&quot;db_name&quot;</span>
      <span class="nv">backup_db_user</span><span class="o">=</span><span class="s2">&quot;db_user&quot;</span>
      <span class="nv">backup_db_pass</span><span class="o">=</span><span class="s2">&quot;db_pass&quot;</span>
      backup_site
        <span class="p">;;</span>
    <span class="k">esac</span>
  <span class="o">}</span>
  <span class="c"># get backup selection from input</span>
  <span class="nv">backup_selection</span><span class="o">=</span><span class="nv">$1</span>
  <span class="c"># set backup destination</span>
  <span class="nv">backup_dir</span><span class="o">=</span><span class="s2">&quot;/home/path/to/backups/$backup_selection/`date +%Y-%m-%d-%H-%M-%S`&quot;</span>
  <span class="c"># execute backup</span>
  site <span class="nv">$backup_selection</span></code></pre></div>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->


<div class="pagination">
  
    
      <a href="/page4" class="btn">Previous</a>
    
  
  <ul class="inline-list">
    <li>
      
        <a href="">1</a>
      
    </li>
    
      <li>
        
          <a href="/page2">2</a>
        
      </li>
    
      <li>
        
          <a href="/page3">3</a>
        
      </li>
    
      <li>
        
          <a href="/page4">4</a>
        
      </li>
    
      <li>
        
          <span class="current-page">5</span>
        
      </li>
    
      <li>
        
          <a href="/page6">6</a>
        
      </li>
    
  </ul>
  
    <a href="/page6" class="btn">Next</a>
  
</div><!-- /.pagination -->
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 Aaron Addleman. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>

          

</body>
</html>