---
layout: post
title: "undefined method `message' for #<Array:0x23022d8>"
description: ""
tags: [uncategorized]
image:
  feature: IMG_0613.JPG
  credit: Aaron Addleman
comments: true
share: true
---


<p>If your a seasoned Rails ninja, you might want to just skip this. However, if you have received this message in your rails application, the below might help you find what went wrong. This is by no means a end all solution, but I stumbled across this error just now and wanted to archive it in the case that I forget in the future.
This error came from an attempt of using the following code:
<span style="font-family: Courier;">&lt;div id="add_request_form"&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;% form_remote_tag :url =&gt;{:action=&gt; :request_approval, :id=&gt;@job.id },:update =&gt; 'request_history',</span><br style="font-family: Courier;"><span style="font-family: Courier;">   :position =&gt; :bottom do  %&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">    &lt;label for="approver_request[message]" style="float: none; display: block; margin: 0, padding: 0; text-align: left;"&gt;Approval message&lt;/label&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">    &lt;%= text_area :approver_request, :message, :cols=&gt;'60', :rows=&gt;'7'%&gt;&lt;br style="margin-top: 10px;" /&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">    &lt;%= submit_tag "Request Approval"%&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;% end %&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;/div&gt;</span><br style="font-family: Courier;"><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;h4&gt;Request History&lt;/h4&gt;    </span><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;dl id="request_history"&gt;</span><br style="font-family: Courier;"><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;% for ar in @approver_request do %&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">    &lt;dt&gt;On &lt;%= ar.created_at %&gt; an approval request was sent to &lt;%= User.find(ar.user_id).name %&gt; (&lt;%= User.find(ar.user_id).email %&gt;)&lt;/dt&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">    &lt;dd&gt;&lt;%= ar.message %&gt;&lt;/dd&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;% end %&gt;</span><br style="font-family: Courier;"><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;/dl&gt;
<br style="font-family: Courier;"></span>Above, there is the code for sending a request for approving a job that has been entered into the web application. This code uses the <span style="font-family: Courier;">remote_form_tag <span style="font-family: Arial;">helper to allow updating the <span style="font-family: Courier;">dl<span style="font-family: Arial;"> object without having to reload the page.
However, the above code will produce the error of <span style="font-family: Courier;">"undefined method `message' for #&lt;Array:0x23022d8&gt;"  <span style="font-family: Arial;">because you cannot share the same variable on the page when one of them is being used for submitting data!! 
Here is what I ended up with:
<span style="font-family: Courier;">&lt;div id="add_request_form"&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;% form_remote_tag :url =&gt;{:action=&gt; :request_approval, :id=&gt;@job.id },:update =&gt; 'request_history',</span><br style="font-family: Courier;"><span style="font-family: Courier;">   :position =&gt; :bottom do  %&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">    &lt;label for="approver_request[message]" style="float: none; display: block; margin: 0, padding: 0; text-align: left;"&gt;Approval message&lt;/label&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">    &lt;%= text_area :approval_request, :message, :cols=&gt;'60', :rows=&gt;'7'%&gt;&lt;br style="margin-top: 10px;" /&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">    &lt;%= submit_tag "Request Approval"%&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;% end %&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;/div&gt;</span><br style="font-family: Courier;"><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;h4&gt;Request History&lt;/h4&gt;    </span><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;dl id="request_history"&gt;</span><br style="font-family: Courier;"><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;% for ar in @approver_request do %&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">    &lt;dt&gt;On &lt;%= ar.created_at %&gt; an approval request was sent to &lt;%= User.find(ar.user_id).name %&gt; (&lt;%= User.find(ar.user_id).email %&gt;)&lt;/dt&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">    &lt;dd&gt;&lt;%= ar.message %&gt;&lt;/dd&gt;</span><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;% end %&gt;</span><br style="font-family: Courier;"><br style="font-family: Courier;"><span style="font-family: Courier;">&lt;/dl&gt;</span><br style="font-family: Courier;"><br style="font-family: Courier;"></span></span></span></span></span></span></p>
